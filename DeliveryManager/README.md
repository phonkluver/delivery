# TUKTUK - КУРЬЕРСКАЯ СЛУЖБА | ДОСТАВКА

Telegram-бот для управления службой доставки, соединяющий магазины, администраторов и курьеров.

## Обзор системы

Бот обеспечивает взаимодействие между тремя типами пользователей:

1. **Магазины**: создают заказы на доставку.
2. **Администраторы**: просматривают заказы и назначают их курьерам.
3. **Курьеры**: получают назначенные заказы и отмечают их как доставленные.

## Функциональность

### Для магазинов
- Создание новых заказов на доставку
- Просмотр статуса своих заказов
- Получение уведомлений о назначении и выполнении доставок

### Для администраторов
- Просмотр всех ожидающих заказов
- Назначение заказов курьерам
- Управление пользователями (добавление/удаление)
- Управление белым списком пользователей
- Генерация отчетов по доставкам

### Для курьеров
- Просмотр назначенных доставок
- Отметка о выполнении доставки
- Добавление комментариев к заказам

## Установка и настройка

### Требования
- Python 3.10 или выше
- aiogram 3.2.0 или выше
- pandas и openpyxl (для экспорта данных)

### Шаги по установке

1. Клонируйте репозиторий:
   ```
   git clone <URL-репозитория>
   cd tuktuk-bot
   ```

2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

3. Настройте конфигурацию:
   - Скопируйте `config.example.py` в `config.py`
   - Установите токен бота и ID администраторов в `config.py`

4. Выполните настройку бота с помощью скрипта:
   ```
   python setup_new_bot.py
   ```

5. Запустите бота:
   ```
   python main.py
   ```

### Очистка данных

Если вам нужно очистить все данные бота и начать с нуля:

```
python clear_data.py
```

## Структура проекта

```
tuktuk-bot/
├── bot.py                  # Инициализация бота
├── config.py               # Конфигурация и настройки
├── main.py                 # Точка входа
├── handlers/               # Обработчики сообщений
│   ├── admin.py            # Обработчики для администраторов
│   ├── common.py           # Общие обработчики
│   ├── courier.py          # Обработчики для курьеров
│   └── shop.py             # Обработчики для магазинов
├── keyboards/              # Клавиатуры Telegram
│   ├── admin_kb.py         # Клавиатуры для администраторов
│   ├── courier_kb.py       # Клавиатуры для курьеров
│   └── shop_kb.py          # Клавиатуры для магазинов
├── storage/                # Данные и хранилище
│   ├── database.py         # Операции с базой данных
│   ├── data.json           # Файл базы данных
│   └── whitelist.json      # Файл белого списка пользователей
├── utils/                  # Утилиты и вспомогательные функции
│   ├── timezone.py         # Функции для работы с часовым поясом
│   └── sms.py              # Заглушки для SMS-уведомлений
├── reports/                # Папка для экспортируемых отчетов
└── requirements.txt        # Зависимости проекта
```

## Режим работы

Бот работает в режиме 24/7, но информирует пользователей о стандартных рабочих часах (10:00 - 20:00). 

## Администрирование

- Администраторы должны быть добавлены в конфигурационный файл `config.py` (переменная `ADMIN_CHAT_IDS`).
- Для управления пользователями используйте команды:
  - `/whitelist_add [ID]` - добавить пользователя в белый список
  - `/whitelist_list` - просмотреть белый список
  - `/whitelist_remove [ID]` - удалить пользователя из белого списка

## Контакты

По всем вопросам обращайтесь к администратору бота.